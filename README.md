# Микросервис для работы с балансом пользователей

## Требования к сервису:
[x] Сервис должен предоставлять HTTP API с форматом JSON как при отправке запроса, так и при получении результата.
[x] Язык разработки: Golang.
[x] Фреймворки и библиотеки можно использовать любые.
[x] Реляционная СУБД: PostgreSQL.
[x] Использование docker и docker-compose для поднятия и развертывания dev-среды.
[x] Весь код должен быть выложен на Github с Readme файлом с инструкцией по запуску и примерами запросов/ответов (можно просто описать в Readme методы, можно через Postman, можно в Readme curl запросы скопировать, и так далее).

## Будет плюсом
[x] Покрытие кода тестами.
[ ] Swagger файл для вашего API.
[x] Реализовать сценарий разрезервирования денег, если услугу применить не удалось.

# Инструкция по использованию
## Запуск
```bash
docker-compose build
docker-compose up
```

## Запросы

### Зачисление денег:
```bash
curl -X POST "localhost:8080/credit" -d '{"user_id":<ИД Пользователя>, "price": <Количество денег, которые нужно внести пользователю>}'
```

### Резервирование суммы
```bash
curl -X POST "localhost:8080/reserve" -d '{"user_id": <ИД Пользователя>, "order_id": <ИД Заказа>, "service_id": <ИД Услуги>, "price": <Количество денег, которое нужно зарезервировать>}' 
```

### Признание выручки
```bash
curl -X POST "localhost:8080/debit_reserve" -d '{"user_id": <ИД Пользователя>, "order_id": <ИД Заказа>, "service_id": <ИД Услуги>, "price": <Количество денег, которое нужно зарезервировать>}' 
```

### Получение баланса пользователя
```bash
curl -X GET "localhost:8080/account" -H "Content-Type: application/json" -d '{"user_id": <ИД Пользователя>}'
```
В теле ответа приходит ```{"balance": <баланс>}```

### Доп. Задание 1. Месячный отчёт по выручке
```bash
curl -X GET "localhost:8080/report" -H "Content-Type: application/json" -d '{"date": "<год>-<месяц>"}'
```
В ответе я кидаю не ссылку на файл, а сам файл.

### Доп. Задание 2. Список транзакций клиента
```bash
curl -X GET "localhost:8080/client_report" -H "Content-Type: application/json" -d '{"user_id": <ИД Пользователя>, "limit": <Максимальное количество строк для вывода>, "offset": <Смещение вывода (Количество строк)>}'
```
Сортировка по сумме и дате есть.